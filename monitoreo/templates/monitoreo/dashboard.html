{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard en Tiempo Real{% endblock %}

{% block content %}
<h1 class="mb-4">Dashboard Principal de Monitoreo IoT</h1>

<p class="lead text-muted">Visualizaci칩n en tiempo real de Temperatura, Humedad e Iluminaci칩n de Sonora.</p>
<hr>

<div class="row row-cols-1 row-cols-md-3 g-4" id="realtime-cards">
    <div class="col-12 text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2">Conectado a MQTT, esperando la primera publicaci칩n en `sonora/#`...</p>
    </div>
</div>

<hr class="mt-5">

<h2 class="mb-3">Explorar Historial de Datos por Municipio</h2>
<div class="list-group">
    {# Muestra solo los primeros 3 municipios en el listado de historial #}
    {% for municipio in municipios|slice:":3" %}
    <a href="{% url 'municipio_detail' municipio_name=municipio %}" class="list-group-item list-group-item-action">
        {{ municipio|capfirst }} - Ver Gr치ficas y Tabla de Historial
    </a>
    {% empty %}
    {% endfor %}
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'monitoreo/js/charts.js' %}"></script>
{% endblock %}